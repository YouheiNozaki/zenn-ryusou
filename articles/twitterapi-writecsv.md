---
title: "TwitterAPIのデータをCSVに出力する"
emoji: "😺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Node.js", "TwitterAPI"]
published: false
---

こんにちは。りゅーそう()です。
ご縁があり、PARKLoT(https://id.park-lot.com/)さんのサービス開発のお手伝いをさせていただいています。
TwitterAPIを使って関数を書く機会がありましたので、そこで得た知見や実装に至ったプロセスを紹介したいと思います。

# 作成したもの

TwitterAPIを叩いて、「Twitterキャンペーン」を行っているツイートを取得し、CSVに出力するツールを作成しました。
Twitterキャンペーンとは以下のようなツイートを指します。
https://twitter.com/PARKLoT1/status/1371068694718148614

## 実装の要件
このようなツイートを取得するためには、企業などが行っているキャンペーンツイートのみを取得する必要があります。
キャンペーンツイートには上記のツイート以外にも、応募者の「キャンペーンに応募しました！」というツイートやリプライなどがある可能性があります。
そういったツイートを除いて、純粋なキャンペーンツイートのみを取得する必要があります。

## 実装プロセス
要件をみたす機能を実装するためにまずは、キャンペーンツイートをツイッターで検索して「どのようなキャンペーンツイートがあるのか？」「キャンペーンツイートの共通点はなにか」を考えながら、スプレッドシートに数十件ほど書き込んでみました。
そのようにしていく中で以下のような共通点が見えてきました。
- 「キャンペーン」「フォロー」「開催」「RT」などの用語を含む
- ある程度の数のRT,いいねを含む
- プロモーションサイトへのリンクまたは画像を含む

この条件の中から、実装の要件を以下のように絞り込みました。
- 「キャンペーン」「フォロー」という用語を含む
- いいねの数30以上、RT100以上
- 画像もしくはリンクを含む

この条件は実際にサービスを開発・運用していく中で改善していくことになりそうです。
TwitterAPIを用いてこの条件を含めるには、クエリに
`キャンペーン フォロー min_faves:30 min_retweets:100 (filter:images OR filter:link)`
を含めれば実装できそうです。

参考：https://gist.github.com/cucmberium/e687e88565b6a9ca7039

#TwitterAPIを用いての実装
